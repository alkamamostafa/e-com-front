{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALKAMA\\\\Desktop\\\\commerce\\\\ecommerce-spring-reactjs\\\\frontend\\\\src\\\\pages\\\\Menu\\\\Menu.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Route, useLocation } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Checkbox from \"../../component/CheckBox/Checkbox\";\nimport CheckboxRadio from \"../../component/CheckboxRadio/CheckboxRadio\";\nimport MenuCards from \"../../component/MenuCards/MenuCards\";\nimport { gender, perfumer, price } from \"./MenuData\";\nimport { fetchPerfumes, fetchPerfumesByFilterParams, fetchPerfumesByGender, fetchPerfumesByPerfumer } from \"../../redux/perfumes/perfumes-thunks\";\nimport \"./MenuStyle.css\";\nimport ScrollButton from \"../../component/ScrollButton/ScrollButton\";\nimport { selectIsPerfumesLoading, selectPerfumes } from \"../../redux/perfumes/perfumes-selector\";\nimport { resetPerfumesState } from \"../../redux/perfumes/perfumes-actions\";\n\nconst Menu = () => {\n  const dispatch = useDispatch();\n  const perfumes = useSelector(selectPerfumes);\n  const loading = useSelector(selectIsPerfumesLoading);\n  const [filterParams, setFilterParams] = useState({\n    perfumers: [],\n    genders: [],\n    prices: [1, 999]\n  });\n  const [sortByPrice, setSortByPrice] = useState();\n  const {\n    state\n  } = useLocation();\n  useEffect(() => {\n    const perfumeData = state.id;\n\n    if (perfumeData === \"female\" || perfumeData === \"male\") {\n      dispatch(fetchPerfumesByGender({\n        perfumeGender: perfumeData\n      }));\n    } else if (perfumeData === \"all\") {\n      dispatch(fetchPerfumes());\n    } else {\n      dispatch(fetchPerfumesByPerfumer({\n        perfumer: perfumeData\n      }));\n    }\n\n    window.scrollTo(0, 0);\n    return () => {\n      dispatch(resetPerfumesState());\n    };\n  }, []);\n\n  const getProducts = variables => {\n    dispatch(fetchPerfumesByFilterParams(variables));\n  };\n\n  const handlePrice = value => {\n    let find = price.find(item => item.id == value);\n    return find.array;\n  };\n\n  const handleFilters = (filters, category) => {\n    const newFilters = filterParams;\n    newFilters[category] = filters;\n\n    if (category === \"prices\") {\n      let priceValues = handlePrice(filters);\n      newFilters[category] = priceValues;\n    }\n\n    getProducts({ ...newFilters,\n      sortByPrice\n    });\n    setFilterParams(newFilters);\n  };\n\n  const handleSortByPrice = (sortedBy, event) => {\n    event.preventDefault();\n    setSortByPrice(sortedBy);\n    getProducts({ ...filterParams,\n      sortByPrice: sortedBy\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ScrollButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"nav\", {\n    id: \"sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sidebar-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Perfumes\")), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-unstyled components\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"Brand\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"active mb-2\",\n    id: \"homeSubmenu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    list: perfumer,\n    handleFilters: filters => handleFilters(filters, \"perfumers\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Gender\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"active mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    list: gender,\n    handleFilters: filters => handleFilters(filters, \"genders\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"active mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CheckboxRadio, {\n    list: price,\n    handleFilters: filters => handleFilters(filters, \"prices\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    component: () => /*#__PURE__*/React.createElement(MenuCards, {\n      data: perfumes,\n      loading: loading,\n      itemsPerPage: 16,\n      searchByData: [{\n        label: \"Brand\",\n        value: \"perfumer\"\n      }, {\n        label: \"Perfume title\",\n        value: \"perfumeTitle\"\n      }, {\n        label: \"Manufacturer country\",\n        value: \"country\"\n      }],\n      sortByPrice: sortByPrice,\n      handleSortByPrice: handleSortByPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Menu;","map":{"version":3,"names":["React","useEffect","useState","Route","useLocation","useDispatch","useSelector","Checkbox","CheckboxRadio","MenuCards","gender","perfumer","price","fetchPerfumes","fetchPerfumesByFilterParams","fetchPerfumesByGender","fetchPerfumesByPerfumer","ScrollButton","selectIsPerfumesLoading","selectPerfumes","resetPerfumesState","Menu","dispatch","perfumes","loading","filterParams","setFilterParams","perfumers","genders","prices","sortByPrice","setSortByPrice","state","perfumeData","id","perfumeGender","window","scrollTo","getProducts","variables","handlePrice","value","find","item","array","handleFilters","filters","category","newFilters","priceValues","handleSortByPrice","sortedBy","event","preventDefault","label"],"sources":["C:/Users/ALKAMA/Desktop/commerce/ecommerce-spring-reactjs/frontend/src/pages/Menu/Menu.tsx"],"sourcesContent":["import React, { FC, ReactElement, useEffect, useState } from \"react\";\r\nimport { Route, useLocation } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport Checkbox from \"../../component/CheckBox/Checkbox\";\r\nimport CheckboxRadio from \"../../component/CheckboxRadio/CheckboxRadio\";\r\nimport MenuCards from \"../../component/MenuCards/MenuCards\";\r\nimport { gender, perfumer, price } from \"./MenuData\";\r\nimport {\r\n    fetchPerfumes,\r\n    fetchPerfumesByFilterParams,\r\n    fetchPerfumesByGender,\r\n    fetchPerfumesByPerfumer\r\n} from \"../../redux/perfumes/perfumes-thunks\";\r\nimport \"./MenuStyle.css\";\r\nimport { FilterParamsType } from \"../../types/types\";\r\nimport ScrollButton from \"../../component/ScrollButton/ScrollButton\";\r\nimport { selectIsPerfumesLoading, selectPerfumes } from \"../../redux/perfumes/perfumes-selector\";\r\nimport { resetPerfumesState } from \"../../redux/perfumes/perfumes-actions\";\r\n\r\nconst Menu: FC = (): ReactElement => {\r\n    const dispatch = useDispatch();\r\n    const perfumes = useSelector(selectPerfumes);\r\n    const loading = useSelector(selectIsPerfumesLoading);\r\n    const [filterParams, setFilterParams] = useState<FilterParamsType>({\r\n        perfumers: [],\r\n        genders: [],\r\n        prices: [1, 999]\r\n    });\r\n    const [sortByPrice, setSortByPrice] = useState<boolean>();\r\n    const { state } = useLocation<{ id: string }>();\r\n\r\n    useEffect(() => {\r\n        const perfumeData: string = state.id;\r\n\r\n        if (perfumeData === \"female\" || perfumeData === \"male\") {\r\n            dispatch(fetchPerfumesByGender({ perfumeGender: perfumeData }));\r\n        } else if (perfumeData === \"all\") {\r\n            dispatch(fetchPerfumes());\r\n        } else {\r\n            dispatch(fetchPerfumesByPerfumer({ perfumer: perfumeData }));\r\n        }\r\n        window.scrollTo(0, 0);\r\n\r\n        return () => {\r\n            dispatch(resetPerfumesState());\r\n        };\r\n    }, []);\r\n\r\n    const getProducts = (variables: FilterParamsType): void => {\r\n        dispatch(fetchPerfumesByFilterParams(variables));\r\n    };\r\n\r\n    const handlePrice = (value: number): Array<number> => {\r\n        let find = price.find((item) => item.id == value);\r\n        return find!.array;\r\n    };\r\n\r\n    const handleFilters = (filters: Array<string> | number, category: string): void => {\r\n        const newFilters: any = filterParams;\r\n        newFilters[category] = filters;\r\n\r\n        if (category === \"prices\") {\r\n            let priceValues = handlePrice(filters as number);\r\n            newFilters[category] = priceValues;\r\n        }\r\n        getProducts({ ...newFilters, sortByPrice });\r\n        setFilterParams(newFilters);\r\n    };\r\n\r\n    const handleSortByPrice = (sortedBy: boolean, event: React.MouseEvent<HTMLAnchorElement, MouseEvent>): void => {\r\n        event.preventDefault();\r\n\r\n        setSortByPrice(sortedBy);\r\n        getProducts({ ...filterParams, sortByPrice: sortedBy });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container d-flex\">\r\n            <ScrollButton />\r\n            <nav id=\"sidebar\">\r\n                <div className=\"sidebar-header\">\r\n                    <h3>Perfumes</h3>\r\n                </div>\r\n                <ul className=\"list-unstyled components\">\r\n                    <h5>Brand</h5>\r\n                    <li className=\"active mb-2\" id=\"homeSubmenu\">\r\n                        <Checkbox list={perfumer} handleFilters={(filters) => handleFilters(filters, \"perfumers\")} />\r\n                    </li>\r\n                    <h5>Gender</h5>\r\n                    <li className=\"active mb-2\">\r\n                        <Checkbox list={gender} handleFilters={(filters) => handleFilters(filters, \"genders\")} />\r\n                    </li>\r\n                    <h5>Price</h5>\r\n                    <li className=\"active mb-2\">\r\n                        <CheckboxRadio list={price} handleFilters={(filters) => handleFilters(filters, \"prices\")} />\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n            <Route\r\n                exact\r\n                component={() => (\r\n                    <MenuCards\r\n                        data={perfumes}\r\n                        loading={loading}\r\n                        itemsPerPage={16}\r\n                        searchByData={[\r\n                            { label: \"Brand\", value: \"perfumer\" },\r\n                            { label: \"Perfume title\", value: \"perfumeTitle\" },\r\n                            { label: \"Manufacturer country\", value: \"country\" }\r\n                        ]}\r\n                        sortByPrice={sortByPrice}\r\n                        handleSortByPrice={handleSortByPrice}\r\n                    />\r\n                )}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Menu;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}