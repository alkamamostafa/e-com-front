{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALKAMA\\\\Desktop\\\\commerce\\\\ecommerce-spring-reactjs\\\\frontend\\\\src\\\\pages\\\\Registration\\\\Registration.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { faEnvelope, faLock, faUser, faUserPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { registration } from \"../../redux/auth/auth-thunks\";\nimport PageLoader from \"../../component/PageLoader/PageLoader\";\nimport InfoTitle from \"../../component/InfoTitle/InfoTitle\";\nimport Alert from \"../../component/Alert/Alert\";\nimport IconButton from \"../../component/IconButton/IconButton\";\nimport { selectErrors, selectIsAuthLoading, selectIsRegistered } from \"../../redux/auth/auth-selector\";\nimport Input from \"../../component/Input/Input\";\nimport { resetAuthState } from \"../../redux/auth/auth-actions\";\nconst initialState = {\n  email: \"\",\n  firstName: \"\",\n  lastName: \"\",\n  password: \"\",\n  password2: \"\"\n};\n\nconst Registration = () => {\n  const dispatch = useDispatch();\n  const isRegistered = useSelector(selectIsRegistered);\n  const isLoading = useSelector(selectIsAuthLoading);\n  const errors = useSelector(selectErrors);\n  const [registrationInfo, setRegistrationInfo] = useState(initialState);\n  const [captchaValue, setCaptchaValue] = useState(\"\");\n  const {\n    email,\n    firstName,\n    lastName,\n    password,\n    password2\n  } = registrationInfo;\n  useEffect(() => {\n    dispatch(resetAuthState());\n  }, []);\n  useEffect(() => {\n    setRegistrationInfo(initialState);\n    setCaptchaValue(\"\");\n  }, [isRegistered]);\n\n  const onClickSignUp = event => {\n    event.preventDefault();\n    const userRegistrationData = {\n      email,\n      firstName,\n      lastName,\n      password,\n      password2,\n      captcha: captchaValue\n    };\n    dispatch(registration(userRegistrationData)); // @ts-ignore\n\n    window.grecaptcha.reset();\n  };\n\n  const onChangeRecaptcha = token => {\n    setCaptchaValue(token);\n  };\n\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setRegistrationInfo({ ...registrationInfo,\n      [name]: value\n    });\n  };\n\n  let pageLoading;\n\n  if (isLoading) {\n    pageLoading = /*#__PURE__*/React.createElement(PageLoader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 23\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, pageLoading, /*#__PURE__*/React.createElement(InfoTitle, {\n    iconClass: \"mr-2\",\n    icon: faUserPlus,\n    title: \"SIGN UP\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), isRegistered && /*#__PURE__*/React.createElement(Alert, {\n    alertType: \"success\",\n    message: \"Activation code has been sent to your email!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onClickSignUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    title: \"E-mail\",\n    icon: faEnvelope,\n    titleClass: \"col-sm-2\",\n    wrapperClass: \"col-sm-4\",\n    type: \"email\",\n    error: errors.emailError,\n    name: \"email\",\n    value: email,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    title: \"First name\",\n    icon: faUser,\n    titleClass: \"col-sm-2\",\n    wrapperClass: \"col-sm-4\",\n    type: \"text\",\n    error: errors.firstNameError,\n    name: \"firstName\",\n    value: firstName,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    title: \"Last name\",\n    icon: faUser,\n    titleClass: \"col-sm-2\",\n    wrapperClass: \"col-sm-4\",\n    type: \"text\",\n    error: errors.lastNameError,\n    name: \"lastName\",\n    value: lastName,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    title: \"Password\",\n    icon: faLock,\n    titleClass: \"col-sm-2\",\n    wrapperClass: \"col-sm-4\",\n    type: \"password\",\n    error: errors.passwordError,\n    name: \"password\",\n    value: password,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    title: \"Confirm password\",\n    icon: faLock,\n    titleClass: \"col-sm-2\",\n    wrapperClass: \"col-sm-4\",\n    type: \"password\",\n    error: errors.password2Error,\n    name: \"password2\",\n    value: password2,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    buttonText: \"Sign up\",\n    buttonClassName: \"mx-3\",\n    icon: faUserPlus,\n    iconClassName: \"mr-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(ReCAPTCHA, {\n    onChange: onChangeRecaptcha,\n    sitekey: \"6Lc5cLkZAAAAAN8mFk85HQieB9toPcWFoW0RXCNR\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default Registration;","map":{"version":3,"names":["React","useEffect","useState","ReCAPTCHA","useDispatch","useSelector","faEnvelope","faLock","faUser","faUserPlus","registration","PageLoader","InfoTitle","Alert","IconButton","selectErrors","selectIsAuthLoading","selectIsRegistered","Input","resetAuthState","initialState","email","firstName","lastName","password","password2","Registration","dispatch","isRegistered","isLoading","errors","registrationInfo","setRegistrationInfo","captchaValue","setCaptchaValue","onClickSignUp","event","preventDefault","userRegistrationData","captcha","window","grecaptcha","reset","onChangeRecaptcha","token","handleInputChange","name","value","target","pageLoading","emailError","firstNameError","lastNameError","passwordError","password2Error"],"sources":["C:/Users/ALKAMA/Desktop/commerce/ecommerce-spring-reactjs/frontend/src/pages/Registration/Registration.tsx"],"sourcesContent":["import React, { ChangeEvent, FC, FormEvent, ReactElement, useEffect, useState } from \"react\";\r\nimport ReCAPTCHA from \"react-google-recaptcha\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { faEnvelope, faLock, faUser, faUserPlus } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { registration } from \"../../redux/auth/auth-thunks\";\r\nimport PageLoader from \"../../component/PageLoader/PageLoader\";\r\nimport { UserRegistration } from \"../../types/types\";\r\nimport InfoTitle from \"../../component/InfoTitle/InfoTitle\";\r\nimport Alert from \"../../component/Alert/Alert\";\r\nimport IconButton from \"../../component/IconButton/IconButton\";\r\nimport { selectErrors, selectIsAuthLoading, selectIsRegistered } from \"../../redux/auth/auth-selector\";\r\nimport Input from \"../../component/Input/Input\";\r\nimport { resetAuthState } from \"../../redux/auth/auth-actions\";\r\n\r\nconst initialState = {\r\n    email: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    password: \"\",\r\n    password2: \"\"\r\n};\r\n\r\nconst Registration: FC = (): ReactElement => {\r\n    const dispatch = useDispatch();\r\n    const isRegistered = useSelector(selectIsRegistered);\r\n    const isLoading = useSelector(selectIsAuthLoading);\r\n    const errors = useSelector(selectErrors);\r\n\r\n    const [registrationInfo, setRegistrationInfo] = useState(initialState);\r\n    const [captchaValue, setCaptchaValue] = useState<string | null>(\"\");\r\n    const { email, firstName, lastName, password, password2 } = registrationInfo;\r\n\r\n    useEffect(() => {\r\n        dispatch(resetAuthState());\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setRegistrationInfo(initialState);\r\n        setCaptchaValue(\"\");\r\n    }, [isRegistered]);\r\n\r\n    const onClickSignUp = (event: FormEvent<HTMLFormElement>): void => {\r\n        event.preventDefault();\r\n        const userRegistrationData: UserRegistration = {\r\n            email,\r\n            firstName,\r\n            lastName,\r\n            password,\r\n            password2,\r\n            captcha: captchaValue\r\n        };\r\n        dispatch(registration(userRegistrationData));\r\n        // @ts-ignore\r\n        window.grecaptcha.reset();\r\n    };\r\n\r\n    const onChangeRecaptcha = (token: string | null): void => {\r\n        setCaptchaValue(token);\r\n    };\r\n\r\n    const handleInputChange = (event: ChangeEvent<HTMLInputElement>): void => {\r\n        const { name, value } = event.target;\r\n        setRegistrationInfo({ ...registrationInfo, [name]: value });\r\n    };\r\n\r\n    let pageLoading;\r\n    if (isLoading) {\r\n        pageLoading = <PageLoader />;\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            {pageLoading}\r\n            <InfoTitle iconClass={\"mr-2\"} icon={faUserPlus} title={\"SIGN UP\"} />\r\n            <hr />\r\n            {isRegistered && <Alert alertType={\"success\"} message={\"Activation code has been sent to your email!\"} />}\r\n            <form onSubmit={onClickSignUp}>\r\n                <Input\r\n                    title={\"E-mail\"}\r\n                    icon={faEnvelope}\r\n                    titleClass={\"col-sm-2\"}\r\n                    wrapperClass={\"col-sm-4\"}\r\n                    type={\"email\"}\r\n                    error={errors.emailError}\r\n                    name={\"email\"}\r\n                    value={email}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <Input\r\n                    title={\"First name\"}\r\n                    icon={faUser}\r\n                    titleClass={\"col-sm-2\"}\r\n                    wrapperClass={\"col-sm-4\"}\r\n                    type={\"text\"}\r\n                    error={errors.firstNameError}\r\n                    name={\"firstName\"}\r\n                    value={firstName}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <Input\r\n                    title={\"Last name\"}\r\n                    icon={faUser}\r\n                    titleClass={\"col-sm-2\"}\r\n                    wrapperClass={\"col-sm-4\"}\r\n                    type={\"text\"}\r\n                    error={errors.lastNameError}\r\n                    name={\"lastName\"}\r\n                    value={lastName}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <Input\r\n                    title={\"Password\"}\r\n                    icon={faLock}\r\n                    titleClass={\"col-sm-2\"}\r\n                    wrapperClass={\"col-sm-4\"}\r\n                    type={\"password\"}\r\n                    error={errors.passwordError}\r\n                    name={\"password\"}\r\n                    value={password}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <Input\r\n                    title={\"Confirm password\"}\r\n                    icon={faLock}\r\n                    titleClass={\"col-sm-2\"}\r\n                    wrapperClass={\"col-sm-4\"}\r\n                    type={\"password\"}\r\n                    error={errors.password2Error}\r\n                    name={\"password2\"}\r\n                    value={password2}\r\n                    onChange={handleInputChange}\r\n                />\r\n                <div className=\"form-group row\">\r\n                    <IconButton\r\n                        buttonText={\"Sign up\"}\r\n                        buttonClassName={\"mx-3\"}\r\n                        icon={faUserPlus}\r\n                        iconClassName={\"mr-3\"}\r\n                    />\r\n                </div>\r\n                <ReCAPTCHA onChange={onChangeRecaptcha} sitekey=\"6Lc5cLkZAAAAAN8mFk85HQieB9toPcWFoW0RXCNR\" />\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Registration;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}